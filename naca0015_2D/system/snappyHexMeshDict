// -*- C++ -*-
// File generated by PyFoam - sorry for the ugliness

FoamFile
{
 version 2.0;
 format ascii; 	
 root ""; 	
 case ""; 	
 instance ""; 	
 local ""; 	
 class dictionary; 	
 object snappyHexMeshDict; 	
}

snapControls
{
  nRelaxIter 5;
  nSmoothPatch 3;
  nSolveIter 30;
  tolerance 4.0;
    nFeatureSnapIter 5;
    explicitFeatureSnap true;
}
addLayers true; 	

geometry
{
  naca0015.stl
  {
    name naca0015;
    type triSurfaceMesh;
    regions
    {
        naca0015
        {
            name naca0015;
        }
    }
  }
  refBox1
  {
    min (-0.045 -1 -0.015);
    max (0.085 1 0.03);
    type searchableBox;
  }
  refBox2
  {
    min (-0.03 -1 -0.0025);
    max (-0.02 1 0.01);
    type searchableBox;
  }
  refBox3
  {
    min (0.067 -1 -0.014);
    max (0.071 1 -0.01);
    type searchableBox;
  }
};	

meshQualityControls
{
    #includeEtc "caseDicts/meshQualityDict"

    relaxed
    {
        maxNonOrtho 65;
    }
    // Advanced

    //- Number of error distribution iterations
    nSmoothScale 4;
    //- Amount to scale back displacement at error points
    errorReduction 0.75;
  /*errorReduction 0.75;*/
  /*maxBoundarySkewness 20;*/
  /*maxConcave 80;*/
  /*maxInternalSkewness 4;*/
  /*maxNonOrtho 65;*/
  /*minArea -1;*/
  /*minDeterminant 0.001;*/
  /*minFaceWeight 0.02;*/
  /*minFlatness 0.5;*/
  /*minTriangleTwist -1;*/
  /*minTwist 0.02;*/
  /*minVol 1e-13;*/
  /*minVolRatio 0.01;*/
  /*nSmoothScale 4;*/
  /*minTetQuality 1e-30;*/
} 	

mergeTolerance 1 E-6; 	

castellatedMeshControls
{
  allowFreeStandingZoneFaces false;
  features ( 
      {
          file "naca0015.eMesh";
          level 3;
      }
  );
  locationInMesh (-0.1 0.05 0.02);
  maxGlobalCells 2000000;
  maxLocalCells 1000000;
  minRefinementCells 10;
  nCellsBetweenLevels 8;
  refinementRegions
  {
    refBox1
    {
      levels ((3 4));
      mode inside;
    }
    /*refBox2*/
    /*{*/
      /*levels ((4 5));*/
      /*mode inside;*/
    /*}*/
    /*refBox3*/
    /*{*/
      /*levels ((3 5));*/
      /*mode inside;*/
    /*}*/
  }
  refinementSurfaces
  {
    naca0015
    {
      level (3 4);
    }
  }
  resolveFeatureAngle 90;
} 	

snap true; 	

addLayersControls
{
  expansionRatio 1.4;
  featureAngle 120;
  /*finalLayerThickness 0.5;*/
  firstLayerThickness 1e-4;
  /*thickness 1e-3;*/
  layers
  {
    naca0015
    {
      nSurfaceLayers 6;
    }
  }
  maxFaceThicknessRatio 2.0;
  maxThicknessToMedialRatio 2.0;
  minMedianAxisAngle 90;
  minThickness 1e-6;
  nBufferCellsNoExtrude 0;
  nGrow 0;
  nLayerIter 50;
  nRelaxIter 5;
  nRelaxedIter 20;
  nSmoothNormals 3;
  nSmoothSurfaceNormals 1;
  nSmoothThickness 10;
  /*relativeSizes true;*/
  relativeSizes false;
} 	

debug 0; 	

castellatedMesh true; 	

